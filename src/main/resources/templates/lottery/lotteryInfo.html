<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<!-- element样式 -->
<link rel="stylesheet" href="../../static/element-ui/lib/theme-chalk/index.css">
</head>
<body>
	<div id="app">
	      <!--查询表单-->
	      <el-row gutter="20">
	        <el-col span="24">
	          <el-button type="primary" @click="showGuess" size="small" style="margin-right:10px">竞猜下一期</el-button>
	        </el-col>
	      </el-row>
	
		<!-- 数据表格 -->
		<el-table :data="lotteryList" border style="width: 100%;height:100%;">
		    <el-table-column fixed prop="id" label="期数" width="75">		    	
	          <template slot-scope="props">
	          		第{{ props.row.id}}期
	          </template>
		    </el-table-column>
		    <el-table-column prop="oneWinningNum" label="第一个数" width="80"> </el-table-column>
		    <el-table-column prop="twoWinningNum" label="第二个数" width="80"> </el-table-column>
		    <el-table-column prop="threeWinningNum" label="第三个数" width="80"> </el-table-column>
		    <el-table-column prop="fourWinningNum" label="第四个数" width="80"></el-table-column>
		    <el-table-column prop="fiveWinningNum" label="第五个数" width="80"></el-table-column>
		    <el-table-column prop="integral" label="底分" width="80">   	    	
		    	<template slot-scope="props">
		     		底分:{{ props.row.integral}}分
		    	</template>
	          </el-table-column>
		    <el-table-column prop="createTime" :formatter="formatDate" label="时间" width="200"></el-table-column>
			  <el-table-column label="操作" width="200">
		          <template slot-scope="props">
		            <el-button @click="showDetail(props.row)" type="text" size="small"> <span>查看中奖详情</span ></el-button>
		          </template>
	        </el-table-column>
		</el-table>
		
		<!-- 竞猜页面 -->
     	<el-dialog title="竞猜" :visible.sync="GuessDetail" close-on-click-modal='false'>
     	</el-dialog>
	</div>
	
</body>
<!-- vueJs -->
<script type="text/javascript" src="../../static/js/vue.min.js"></script>
<!-- elementJs -->
<script type="text/javascript" src="../../static/element-ui/lib/index.js"></script>
<!-- axiosJs -->
<script type="text/javascript" src="../../static/js/axios.min.js"></script>
<script type="text/javascript">
	new Vue({
		el:"#app",
		data:{
			lotteryList:[], //数据集合
			GuessDetail:false, //弹出层默认为false
			GuessInfo:{
				oneWinningNum:0,
				twoWinningNum:0,
				threeWinningNum:0,
				fourWinningNum:0,
				fiveWinningNum:0
			}//竞猜对象
		},
		methods:{
			//初始化数据
			getData(){
				let thet=this
	            axios.get("/lottery/getLotteryInfo").then(function (response) {
	            	let data=response.data;
	            	thet.lotteryList=data.dataList;
	              })
	              .catch(function (error) {
	                	console.log("请联系管理员");
	                	console.log(error);
	              });
			},
			//时间格式转换
			formatDate(row, column) {
				var date = new Date(row.createTime) //时间戳为10位需*1000，时间戳为13位的话不需乘1000
		        var Y = date.getFullYear() + '-'
		        var M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-'
		        var D = date.getDate() + ' '
		        var h = date.getHours() + ':'
		        var m = date.getMinutes() + ':'
		        var s = date.getSeconds()
		        return Y+M+D+h+m+s
            },
            //竞猜弹出层
            showGuess(){
            	this.GuessDetail=true;
            }
		},
		created(){
			this.getData();
		}
	})
</script>
</html>

